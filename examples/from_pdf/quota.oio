Server

variable obliv int@{Alice} x := ?0;
channel int@{Alice} PONG;

// Restrict the number of output bytes triggered by Alice
variable int@{} quota := 256;

int@{Alice} PING(x) {
    // prelude is always run, hence this is fine
    quota := quota - size(!x);
} {
    // No assignments to store, hence no need for buffers
    if (quota >= size(!x))
    then output PONG(!x+1);
    else skip;
}