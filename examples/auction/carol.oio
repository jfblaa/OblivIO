CAROL

var max_bid : int@{H} = 512;

AUCTION_STATUS(sender: (string*int)@{H} -> int@{H}, status : int@{H}) {
    var bid : int@{H} = 0;

    ;;

    oblif status < max_bid
    then {
        oblif status != -1
        then bid ?= status+1;
        else skip;
        send(sender,AUCTION_STATUS,("Carol",bid));
    }
    else skip;
}

AUCTION_OVER(winner : (string*int)@{H}) {
    print("Auction won by", fst winner);
    print("Winning bid was", snd winner);
}
