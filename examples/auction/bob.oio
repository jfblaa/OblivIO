BOB

channel AUCTIONHOUSE/BID@{H} : (string@{H}*int@{H})@{H};

var max_bid : int@{H} = 350;

AUCTION_STATUS@{H} (status : int@{H}) {
    var bid : int@{H} = 0;

    ;;

    oblif status < max_bid
    then {
        oblif status != -1
        then bid ?= status+1;
        else skip;
        send(AUCTIONHOUSE/BID,("Bob",bid));
    }
    else skip;
}

AUCTION_OVER@{} (winner : (string@{H}*int@{H})@{H}) {
    print("Auction won by", fst winner);
    print("Winning bid was", snd winner);
}
