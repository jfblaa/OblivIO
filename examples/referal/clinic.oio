Clinic

channel int@{Doctor} APPOINTMENT;

variable obliv int@{Doctor} patient_id := ?0;

variable int@{Doctor} next_slot := 42;

int@{Doctor} REFER(patient_id) {
  skip;
} {
  output APPOINTMENT(next_slot);
  next_slot ?= ?(next_slot + 1);
}
