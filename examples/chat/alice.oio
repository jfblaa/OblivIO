ALICE

input@{H};
channel BOB/CHAT@{}: string@{H};

var msg_out: string@{H} = "";

START@{} (ignored: int@{}) {
    send(BOB/CHAT,"");
}

CHAT@{} (msg_in: string@{H}) {
    oblif msg_in != ""
    then print("Bob says",msg_in);
    else skip;

    msg_out ?= input(32);
    send(BOB/CHAT,msg_out);
    msg_out = "";
}