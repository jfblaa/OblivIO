{Customer}

declare string<m> stock := "XYZ"@{Broker};
declare int<m> threshold := 50@{Broker};

init send({Broker},"PRICE",stock);



hn ({Broker},"PRICE_ABC",int<m> price) {
    obliv if (price <= threshold) then {
        send({Broker},"BUY_ABC",10);
    } else {
        send({Broker},"SELL_ABC",10);
    }
}

hn ({Broker},"PRICE_XYZ",int<m> price) {
    obliv if (price <= threshold) then {
        send({Broker},"BUY_XYZ",10);
    } else {
        send({Broker},"SELL_XYZ",10);
    }
}